(()=>{var e={};e.id=887,e.ids=[887],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},52848:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>m,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>g});var n=t(96559),i=t(48088),a=t(37719),o=t(32190),u=t(75745),p=t(70762),c=t(85665),d=t.n(c);let l=p.z.object({email:p.z.string().email(),password:p.z.string().min(6)});async function g(e){let r=await e.json(),t=l.safeParse(r);if(!t.success)return o.NextResponse.json({error:"Invalid input"},{status:400});let{email:s,password:n}=t.data,i=(await (0,u.Lf)()).collection("users");if(await i.findOne({email:s}))return o.NextResponse.json({error:"email-already-in-use"},{status:409});let a=await d().hash(n,12),p=await i.insertOne({email:s,passwordHash:a,role:"sanirud.perera@gmail.com"===s?"admin":"customer",purchaseHistory:[]});return o.NextResponse.json({id:p.insertedId.toString()},{status:201})}let m=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"D:\\Programming\\AllegroScore\\src\\app\\api\\auth\\signup\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:f,serverHooks:v}=m;function w(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:f})}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75745:(e,r,t)=>{"use strict";t.d(r,{Lf:()=>o,M:()=>u});var s=t(12518);let n=process.env.MONGODB_URI;if(!n)throw Error("MONGODB_URI is not set. Add it to .env.local and restart.");let i=global;async function a(){return i.mongoClientPromise||(i.mongoClientPromise=new s.MongoClient(n).connect()),i.mongoClientPromise}async function o(e=process.env.MONGODB_DB||"allegroscore"){return(await a()).db(e)}async function u(e="files"){let r=await o();return new s.GridFSBucket(r,{bucketName:e})}},78335:()=>{},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[719,580,18],()=>t(52848));module.exports=s})();